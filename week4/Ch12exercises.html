<!DOCTYPE html>
<html lang="en">
    <meta charset="UTF-8"/>
    <title>Christine Noonan's WDD 330 Portfolio</title>
    <body>
        <h3>Exercises & Notes for Chapter 12</h3>
        
        <p>Note: to see output, please open developer tools.</p>

        <script>
            const Dice = function(sides=6){
                this.sides = sides;
                this.roll = function() {
                    return Math.floor(this.sides * Math.random() + 1)
                }
            }

            const redDice = new Dice();
            console.log(redDice);

            const whiteDice = new Dice(4);

            console.log(redDice instanceof Dice);
            console.log(redDice.sides);
            console.log(redDice.roll());

            const literalObject = {};
            console.log(literalObject);
            
            constructedObject = new Object();
            console.log(constructedObject);

            console.log(literalObject instanceof Object);

            const literalArray = [1,2,3]
            console.log(literalArray);

            constructedArray = new Array(1,2,3);
            console.log(constructedArray);

            class Dice2 {
                constructor(sides=6) {
                    this.sides = sides;
                }
                roll() {
                    return Math.floor(this.sides * Math.random() + 1)
                }
            }

            const blueDice = new Dice2(20);
            console.log(blueDice);
            console.log(blueDice instanceof Dice2);
            console.log(blueDice.sides);
            console.log(blueDice.roll());

            console.log(blueDice.constructor);

            const greenDice = new redDice.constructor(10);
            console.log(greenDice instanceof Dice);

            class Dice3 {
                constructor(sides=6) {
                    this.sides = sides;
                }
                roll() {
                    return Math.floor(this.sides * Math.random() + 1)
                }
                static description() {
                    return 'A way of choosing random numbers'
                }
            }

            console.log(Dice3.description());

            class Turtle {
                constructor(name) {
                    this.name = name;
                    this.weapon = 'hands';
                }
                sayHi() {
                    return `Hi dude, my name is ${this.name}`;
                }
                attack(){
                    return `Feel the power of my ${this.weapon}!`;
                }
            }

            const leo = new Turtle('Leonardo');
            console.log(leo);
            console.log(leo.name);
            console.log(leo.sayHi());

            console.log(Turtle.prototype);
            Turtle.prototype.weapon = 'Hands';

            Turtle.prototype.attack = function() {
                return `Feel the power of my ${this.weapon}!`;
            };

            const raph = new Turtle('Raphael');
            console.log(raph.name);
            console.log(raph.sayHi());
            console.log(raph.weapon);
            console.log(raph.attack);

            console.log(raph.constructor.prototype);
            console.log(Object.getPrototypeOf(raph));
            console.log(raph.__proto__);
            console.log(Turtle.prototype.isPrototypeOf(raph));

            console.log(raph.hasOwnProperty('name'));
            console.log(raph.hasOwnProperty('weapon'));

            const don = new Turtle('Donatello');
            console.log(don);

            console.log(leo.weapon);
            console.log(leo.attack);

            Turtle.prototype.weapon = 'Feet';
            console.log(raph.attack());

            console.log(leo.weapon = 'Katana Blades');
            console.log(raph.weapon = 'Sai');
            console.log(don.weapon = 'Bo Staff');
            console.log(leo);

            console.log(leo.attack());

            Turtle.prototype.food = 'Pizza';
            Turtle.prototype.eat = function() {
                return `Mmmm, this ${this.food} tastes great!`;
            }

            const mike = new Turtle('Michelangelo');
            console.log(mike.eat());
            console.log(mike.weapon = "nunchakus");
            console.log(mike.attack());

            console.log(raph.weapon);
            //console.log(raph.weapon = 3);

            class Turtle2 {
                constructor(name,color) {
                    this.name = name;
                    let _color = color;
                    this.setColor = color => { return _color = color; }
                    this.getColor = () => _color;
                }
            }

            raph2 = new Turtle2('Raphael', 'Red');
            console.log(raph2);
            console.log(raph2.getColor());
            console.log(raph2.setColor());

            this.setColor = (color) => {
                if(typeof color === 'string'){
                    return _color = color;
                    } else {
                        throw new Error('Color must be a string');
                    }
                }
                console.log(raph2.setColor(4));

            console.log(Object.getPrototypeOf(raph));
            
            class Turtle3 {
                constructor(name) {
                    this.name = name;
                    }
                sayHi() {
                    return `Hi dude, my name is ${this.name}`;
                }
                swim() {
                    return `${this.name} paddles in the water`;
                }
            }

            class NinjaTurtle extends Turtle {
                constructor(name) {
                    super(name);
                    this.weapon = 'hands';
                }
                attack() { return `Feel the power of my ${this.weapon}!` } 
            }

            console.log([1,2,3].toString());
            console.log(new Number(2));
            console.log(typeof Number(2));
            console.log(raph.toString());

            Number.prototype.isEven = function() {
                return this%2 === 0;
            }

            Number.prototype.isOdd = function() {
                return this%2 === 1;
            }
            
            console.log(42..isEven());
            console.log(765234..isOdd());

            Array.prototype.first = function() {
                return this[0];
            }

            Array.prototype.last = function() {
                return this[this.length - 1];
            }

            const turtles = ['Leonardo', 'Donatello', 'Michaelangelo', 'Raphael'];
            console.log(turtles.first());
            console.log(turtles.last());

            Array.prototype.delete = function(i) {
                return self.splice(i,1);
            }

            String.prototype.trim = String.prototype.trim || function() { 
                return this.replace(/^\s+|\s+$/,''); 
            }

            console.log(' hello '.trim());


            class myArray extends Array {
                constructor(...args){
                    super(...args);
                }
                delete(i) {
                    return this.splice(i,1);
                }
            }
            const list = new myArray(1,2,3);
            console.log(list);

            console.log(list.delete(1));
            console.log(list);

            const me = {name: 'DAZ'};
            Object.defineProperty(me, 'eyeColor', { value: 'blue', writable: false, enumerable: true }); 
            console.log(me.eyeColor);

            me.age = 21;
            me.retirementAge = 65;
            Object.defineProperty(me, 'yearsToRetirement',{
                get() {
                    if(this.age > this.retirementAge) { return 0; }
                    else { return this.retirementAge - this.age; }
                },
                set(value) {
                    this.age = this.retirementAge - value;
                    return value;
                }
            });

            console.log(me.yearsToRetirement);
            me.yearsToRetirement = 10;
            console.log(me.age);

            Object.defineProperty(me, 'age', { 
                get() {
                    return 21;
                },
                set(value) {
                    return value;
                }
            });

            me.age = 30;
            console.log(me.age);

            class Dice4 {
                constructor(sides=6){    
                    Object.defineProperty(this, 'sides', {
                        get() {
                        return `This dice has ${sides} sides`;
                        },
                        set(value) {
                        if(value > 0) {
                            sides = value;
                            return sides;
                        } else {
                            throw new Error('The number of sides must be positive');
                        }
                        }
                    });
                    this.roll = function() {
                        return Math.floor(sides * Math.random() + 1)
                    }
                    }
                }

            const yellowDice = new Dice4;
            console.log(yellowDice.sides);
            yellowDice.sides = 10;
            console.log(yellowDice.sides);
            //console.log(yellowDice.sides = 0); throws an error
            
            const Human = {
                arms: 2,
                legs: 2,
                walk() {console.log('Walking');}
            }

            const lois = Object.create(Human);
            console.log(lois.arms);
            console.log(lois.legs);
            console.log(lois.walk());
            console.log(Human.isPrototypeOf(lois));
            console.log(lois.name = 'Lois Lane');
            console.log(lois.job = 'Reporter');

            const Superhuman = Object.create(Human);
            Superhuman.change = function() {
                return `${this.realName} goes into a phone box and comes out as ${this.name}!`;
            };

            console.log(Superhuman.name = 'Name Needed');
            console.log(Superhuman.realName = 'Real Name Needed');

            const superman = Object.create(Superhuman);
            superman.name = 'Superman';
            superman.realName = 'Clark Kent';

            console.log(superman.change());
            
            Superhuman.init = function(name,realName){
                this.name = name;
                this.realName = realName;
                this.init = undefined; 
                return this;
            }
            
            const batman = Object.create(Superhuman);
            batman.init('Batman', 'Bruce Wayne');
            console.log(batman.change());

            console.log(Superhuman.isPrototypeOf(batman));

            const a = {};
            const b = {name: 'JavaScript'};
            console.log(Object.assign(a,b));

            const c = {numbers: [1,2,3]};
            console.log(Object.assign(a,c));
            console.log(c.numbers.push(4));

            function mixin(target,...objects) {
                for (const object of objects) {   
                if(typeof object === 'object') {
                    for (const key of Object.keys(object)) {
                        if (typeof object[key] === 'object') {
                        target[key] = Array.isArray(object[key]) ? [] : {};
                        mixin(target[key],object[key]);
                        } else {
                        Object.assign(target,object);  
                        }
                    }
                    }
                }
                return target;
            }

            const d = {}, e = {foo: 'bar'}, f = {numbers: [1,2,3]};
            console.log(mixin(d,e,f));
            console.log(f.numbers.push(4));
            console.log(d.numbers);
            console.log(f.numbers);

            const wonderWoman = Object.create(Superhuman);
            console.log(wonderWoman.name = 'Wonder Woman');
            console.log(wonderWoman.realName = 'Diana Prince');

            console.log(wonderWoman.change());

            function copy(target) {
                const object = Object.create(Object.getPrototypeOf(target));
                mixin(object, target);
                return object;
            }

            function createSuperhuman(...mixins) {
                const object = copy(Superhuman);
                return mixin(object,...mixins);
            }
            const hulk = createSuperhuman({name: 'Hulk', realName: 'Bruce Banner'});
            console.log(hulk.change());

            const flight = {
                fly() {
                    console.log(`Up, up and away! ${this.name} soars through the air!`);
                    return this;
                }
            }
            const superSpeed = {
                move() {
                    console.log(`${this.name} can move faster than a speeding bullet!`);
                    return this;
                }  
            }
            const xRayVision = {
                xray() {
                    console.log(`${this.name} can see right through you!`);
                    return this;
                }  
            }

            mixin(superman, flight, superSpeed, xRayVision);
            mixin(wonderWoman, flight, superSpeed);
            console.log(superman.xray());
            console.log(wonderWoman.fly());

            const flash = createSuperhuman({ name: 'Flash', realName: 'Barry Allen' }, superSpeed);
            console.log(flash.change());
            console.log(flash.move());

            console.log(superman.fly().move().xray());

            superman.friends = [batman, wonderWoman]

            superman.findFriends = function(){
                const that = this;
                this.friends.forEach(function(friend) {
                    console.log(`${friend.name} is friends with ${that.name}`);
                }
                );
            }

            console.log(superman.findFriends());

            superman.findFriends = function() {
                this.friends.forEach(function(friend) {
                    console.log(`${friend.name} is friends with ${this.name}`);
                }.bind(this));
            }
            console.log(superman.findFriends());

            superman.findFriends = function() {
                for(const friend of this.friends) {
                    console.log(`${friend.name} is friends with ${this.name}`);
                };
            }
            console.log(superman.findFriends());

            superman.findFriends = function() {
                this.friends.forEach((friend) => {
                    console.log(`${friend.name} is friends with ${this.name}`);
                }
                );
            }
            console.log(superman.findFriends());

            const fly = superman.fly;
            console.log(fly.call(batman));

            </script>


    </body>
</html>